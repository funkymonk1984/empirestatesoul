!function($){function e(){"function"!=typeof zxcvbn?setTimeout(e,50):(d.val(d.data("pw")),d.trigger("pwupdate").trigger("wp-check-valid-field"),1!==parseInt(v.data("start-masked"),10)?l.addClass("show-password"):v.trigger("click"))}function s(){var s=$("#pass-strength-result")[0];m=d.val(),l=d.parent(),p=$('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(d[0].className).data("pw",d.data("pw")).val(d.val()).on(b,function(){p.val()!==m&&(u.val(p.val()),d.val(p.val()).trigger("pwupdate"),m=p.val())}),d.after(p),1===parseInt(d.data("reveal"),10)&&e(),d.on(b+" pwupdate",function(){d.val()!==m&&(m=d.val(),p.val()!==m&&p.val(m),d.add(p).removeClass("short bad good strong"),s.className&&(d.add(p).addClass(s.className),"short"===s.className||"bad"===s.className?(f.prop("checked")||g.prop("disabled",!0),h.show()):(g.prop("disabled",!1),h.hide())))})}function a(){v.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),p.focus(),c.attr("for","pass1-text")}function t(){v=r.find(".wp-hide-pw"),v.show().on("click",function(){1===parseInt(v.data("toggle"),10)?(l.addClass("show-password"),a(),_.isUndefined(p[0].setSelectionRange)||p[0].setSelectionRange(0,100)):(l.removeClass("show-password"),v.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),d.focus(),c.attr("for","pass1"),_.isUndefined(d[0].setSelectionRange)||d[0].setSelectionRange(0,100))})}function n(){var n,i,v;r=$(".user-pass1-wrap"),c=r.find("th label").attr("for","pass1-text"),$(".user-pass2-wrap").hide(),w=$("#submit").on("click",function(){o=!1}),g=w.add(" #createusersub"),h=$(".pw-weak"),f=h.find(".pw-checkbox"),f.change(function(){g.prop("disabled",!f.prop("checked"))}),d=$("#pass1"),d.length&&s(),u=$("#pass2").on(b,function(){u.val().length>0&&(d.val(u.val()),u.val(""),m="",d.trigger("pwupdate"))}),d.is(":hidden")&&(d.prop("disabled",!0),u.prop("disabled",!0),p.prop("disabled",!0)),n=r.find(".wp-pwd"),i=r.find("button.wp-generate-pw"),t(),i.length&&n.hide(),i.show(),i.on("click",function(){o=!0,i.hide(),n.show(),d.attr("disabled",!1),u.attr("disabled",!1),p.attr("disabled",!1),0===p.val().length&&e(),_.defer(function(){p.focus(),_.isUndefined(p[0].setSelectionRange)||p[0].setSelectionRange(0,100)},0)}),v=r.find("button.wp-cancel-pw"),v.on("click",function(){o=!1,p.val(""),wp.ajax.post("generate-password").done(function(e){d.data("pw",e)}),i.show(),n.hide(),d.prop("disabled",!0),u.prop("disabled",!0),p.prop("disabled",!0),a(),d.val("").trigger("pwupdate"),g.prop("disabled",!1)}),r.closest("form").on("submit",function(){o=!1,d.prop("disabled",!1),u.prop("disabled",!1),u.val(d.val()),l.removeClass("show-password")})}function i(){var e=$("#pass1").val(),s;if($("#pass-strength-result").removeClass("short bad good strong"),!e)return void $("#pass-strength-result").html("&nbsp;");switch(s=wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),e)){case 2:$("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:$("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:$("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:$("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:$("#pass-strength-result").addClass("short").html(pwsL10n["short"])}}var o=!1,r,l,d,p,c,u,h,f,v,g,w,m,b;b="oninput"in document.createElement("input")?"input":"keyup",$(document).ready(function(){var e,s,a,t,o=$("#display_name");$("#pass1").val("").on(b+" pwupdate",i),$("#pass-strength-result").show(),$(".color-palette").click(function(){$(this).siblings('input[name="admin_color"]').prop("checked",!0)}),o.length&&$("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var e=[],s={display_nickname:$("#nickname").val()||"",display_username:$("#user_login").val()||"",display_firstname:$("#first_name").val()||"",display_lastname:$("#last_name").val()||""};s.display_firstname&&s.display_lastname&&(s.display_firstlast=s.display_firstname+" "+s.display_lastname,s.display_lastfirst=s.display_lastname+" "+s.display_firstname),$.each($("option",o),function(s,a){e.push(a.value)}),$.each(s,function(a,t){if(t){var n=t.replace(/<\/?[a-z][^>]*>/gi,"");s[a].length&&-1===$.inArray(n,e)&&(e.push(n),$("<option />",{text:n}).appendTo(o))}})}),e=$("#color-picker"),s=$("#colors-css"),a=$("input#user_id").val(),t=$('input[name="checkuser_id"]').val(),e.on("click.colorpicker",".color-option",function(){var e,n=$(this);if(!n.hasClass("selected")&&(n.siblings(".selected").removeClass("selected"),n.addClass("selected").find('input[type="radio"]').prop("checked",!0),a===t)){if(0===s.length&&(s=$('<link rel="stylesheet" />').appendTo("head")),s.attr("href",n.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{e=$.parseJSON(n.children(".icon_colors").val())}catch(i){}e&&(wp.svgPainter.setColors(e),wp.svgPainter.paint())}$.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:n.children('input[name="admin_color"]').val(),nonce:$("#color-nonce").val()}).done(function(e){e.success&&$("body").removeClass(e.data.previousScheme).addClass(e.data.currentScheme)})}}),n()}),$("#destroy-sessions").on("click",function(e){var s=$(this);wp.ajax.post("destroy-sessions",{nonce:$("#_wpnonce").val(),user_id:$("#user_id").val()}).done(function(e){s.prop("disabled",!0),s.siblings(".notice").remove(),s.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){s.siblings(".notice").remove(),s.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),e.preventDefault()}),window.generatePassword=e,$(window).on("beforeunload",function(){return!0===o?userProfileL10n.warn:void 0})}(jQuery);